"use strict";(self.webpackChunkpen_and_paper=self.webpackChunkpen_and_paper||[]).push([[650],{650:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(43),o=r(579);const l=e=>{let{onLogin:t,onLogout:r}=e;const[l,s]=(0,n.useState)(null),[i,a]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),u=(0,n.useRef)(null),g=(0,n.useRef)(null),m=()=>{try{if(!window.google)return;window.google.accounts.id.initialize({client_id:"339241384511-4srj07ljhqvv75ah1roi185hiqnhomo4.apps.googleusercontent.com",callback:h}),g.current&&(g.current.innerHTML="",window.google.accounts.id.renderButton(g.current,{theme:"filled_blue",size:"large",type:"standard",shape:"rectangular",text:"signin_with"})),console.log("Google Identity Services initialized successfully")}catch(e){console.error("Error initializing Google Identity Services:",e),d("Failed to initialize Google login")}};(0,n.useEffect)((()=>{(()=>{if(window.google)return void m();const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=m,e.onerror=()=>{console.error("Failed to load Google Identity Services script"),d("Failed to load Google services")},document.head.appendChild(e)})()}),[]),(0,n.useEffect)((()=>{l||m()}),[l]);const h=e=>{try{const r=JSON.parse(atob(e.credential.split(".")[1])),n={name:r.name,email:r.email,picture:r.picture};s(n),localStorage.setItem("user",JSON.stringify(n)),null===t||void 0===t||t(n)}catch(c){console.error("Error parsing Google response:",c)}};(0,n.useEffect)((()=>{const e=localStorage.getItem("user");if(e)try{s(JSON.parse(e))}catch(c){console.error("Error parsing saved user:",c),localStorage.removeItem("user")}}),[]);return(0,n.useEffect)((()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&a(!1)};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[i]),(0,o.jsxs)("div",{className:"relative",children:[l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{onClick:()=>{a(!i)},className:"flex items-center space-x-2 bg-gray-800 hover:bg-gray-700 rounded-lg px-3 py-2 transition-colors cursor-pointer",children:[(0,o.jsx)("img",{src:l.picture,alt:l.name,className:"w-8 h-8 rounded-full"}),(0,o.jsx)("span",{className:"text-white font-medium max-w-32 truncate",children:l.name}),(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),i&&(0,o.jsx)("div",{ref:u,className:"absolute right-0 top-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 min-w-64 z-50",children:(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,o.jsx)("img",{src:l.picture,alt:l.name,className:"w-12 h-12 rounded-full"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:l.name}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:l.email})]})]}),(0,o.jsx)("button",{onClick:()=>{s(null),localStorage.removeItem("user"),null===r||void 0===r||r(),a(!1)},className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Logout"})]})})]}):(0,o.jsx)("div",{ref:g,className:"inline-block google-btn-container"}),c&&(0,o.jsx)("div",{className:"text-red-600 mt-2",children:c}),(0,o.jsx)("style",{children:"\n          .google-btn-container span {\n            font-weight: 600 !important;\n          }\n        "})]})}}}]);
//# sourceMappingURL=650.f240476f.chunk.js.map